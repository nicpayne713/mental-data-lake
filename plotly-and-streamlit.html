<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="./static/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark" />
    <meta name="generator" content="Marmite" />
    
<meta property="og:title" content="Plotly-And-Streamlit">

<meta property="og:description" content="
Streamlit
I use streamlit for any EDA I ever have to do at work.
It's super easy to spin up a small...">

<meta property="og:image" content="https://cdn.statically.io/gh/pypeaday/images.pype.dev/main/blog-media/plotly-streamlit.gif">


<meta property="og:url" content="https://pype.dev/plotly-and-streamlit.html">

<meta property="og:type" content="article">
<meta property="og:site_name" content="Pype.dev">

<meta property="article:published_time" content=" 2022-03-31T00:00:00+00:00">


<meta property="article:author" content="https://pype.dev/author-nicpayne.html">


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://pype.dev/plotly-and-streamlit.html"
    },
    "url": "https://pype.dev/plotly-and-streamlit.html",
    "headline": "Plotly-And-Streamlit",
    "description": "Streamlit
I use streamlit for any EDA I ever have to do at work.
It's super easy to spin up a small dashboard to filter and view dataframes ...",
    "image": "https://cdn.statically.io/gh/pypeaday/images.pype.dev/main/blog-media/plotly-streamlit.gif",
    "author": {
        "@type": "Person",
        "name": "Nicholas Payne",
        "url": "https://pype.dev/author-nicpayne.html",
    },
    "publisher": {
        "@type": "Organization",
        "name": "Pype.dev",
        "logo": {
            "@type": "ImageObject",
            "url": "https://pype.dev/media/nic-round.png"
        }
    },
    "datePublished": "2022-03-31T00:00:00+00:00"
}
</script>


    <title>Plotly-And-Streamlit | Pype.dev</title>
    <link rel="stylesheet" type="text/css" href="./static/pico.min.css">
    <link rel="stylesheet" type="text/css" href="./static/marmite.css">
    
    <link rel="stylesheet" type="text/css" href="./static/colorschemes/nord.css">
    
    <link rel="stylesheet" type="text/css" href="./static/custom.css">
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/github.min.css" id="highlightjs-theme" />



    <link rel="alternate" type="application/rss+xml" title="index" href="index.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: tech" href="tag-tech.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: homelab" href="tag-homelab.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: linux" href="tag-linux.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: bema" href="tag-bema.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: python" href="tag-python.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: cli" href="tag-cli.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: faith" href="tag-faith.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: bible-project" href="tag-bible-project.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: zfs" href="tag-zfs.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: vim" href="tag-vim.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: bash" href="tag-bash.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: terminal" href="tag-terminal.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: til" href="tag-til.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: git" href="tag-git.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: blog" href="tag-blog.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: infrastructure" href="tag-infrastructure.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: data" href="tag-data.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: webdev" href="tag-webdev.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: homepage" href="tag-homepage.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: nostr" href="tag-nostr.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: flood-story" href="tag-flood-story.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: k8s" href="tag-k8s.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: containers" href="tag-containers.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: olivet" href="tag-olivet.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: reflection" href="tag-reflection.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: design-of-genesis-1-11" href="tag-design-of-genesis-1-11.rss">
    <link rel="alternate" type="application/rss+xml" title="tag: books" href="tag-books.rss">
    <link rel="alternate" type="application/rss+xml" title="author: nicpayne" href="author-nicpayne.rss">
    <link rel="alternate" type="application/rss+xml" title="year: 2025" href="archive-2025.rss">
    <link rel="alternate" type="application/rss+xml" title="year: 2024" href="archive-2024.rss">
    <link rel="alternate" type="application/rss+xml" title="year: 2023" href="archive-2023.rss">
    <link rel="alternate" type="application/rss+xml" title="year: 2022" href="archive-2022.rss">
    

    
    <link rel="alternate" type="application/feed+json" title="JSON index" href="index.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: tech" href="tag-tech.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: homelab" href="tag-homelab.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: linux" href="tag-linux.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: bema" href="tag-bema.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: python" href="tag-python.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: cli" href="tag-cli.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: faith" href="tag-faith.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: bible-project" href="tag-bible-project.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: zfs" href="tag-zfs.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: vim" href="tag-vim.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: bash" href="tag-bash.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: terminal" href="tag-terminal.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: til" href="tag-til.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: git" href="tag-git.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: blog" href="tag-blog.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: infrastructure" href="tag-infrastructure.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: data" href="tag-data.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: webdev" href="tag-webdev.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: homepage" href="tag-homepage.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: nostr" href="tag-nostr.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: flood-story" href="tag-flood-story.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: k8s" href="tag-k8s.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: containers" href="tag-containers.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: olivet" href="tag-olivet.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: reflection" href="tag-reflection.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: design-of-genesis-1-11" href="tag-design-of-genesis-1-11.json">
    <link rel="alternate" type="application/feed+json" title="JSON tag: books" href="tag-books.json">
    <link rel="alternate" type="application/feed+json" title="JSON author: nicpayne" href="author-nicpayne.json">
    <link rel="alternate" type="application/feed+json" title="JSON year: 2025" href="archive-2025.json">
    <link rel="alternate" type="application/feed+json" title="JSON year: 2024" href="archive-2024.json">
    <link rel="alternate" type="application/feed+json" title="JSON year: 2023" href="archive-2023.json">
    <link rel="alternate" type="application/feed+json" title="JSON year: 2022" href="archive-2022.json">
    
    
    
    
</head>
<body>
    
    <div class="container-fluid announcement-wrapper">
        <div class="announcement"></div>
    </div>
    
    <main class="container">
        
        <header class="header-content">
            <nav class="header-nav">
                <ul class="header-name">
                    <li>
                        <hgroup>
                            <h2><a href="./" class="contrast">Pype.dev</a></h2>
                             <p>my mental data-lake</p> 
                        </hgroup>
                    </li>
                </ul>
                <button id="menu-toggle" class="hamburger">&#9776;</button>
                
                <ul class="header-menu" id="header-menu">
                    
                      
                      
                    <li>
                        
                        <a class="menu-item secondary"  href="./archive.html">Archive</a>
                        
                    </li>
                    
                      
                      
                    <li>
                        
                        <a class="menu-item secondary"  href="./tags.html">Tags</a>
                        
                    </li>
                    
                      
                      
                    <li>
                        
                        <a class="menu-item secondary"  href="https://github.com/pypeaday/pype.dev" target="_blank" >Github</a>
                        
                    </li>
                    
                    <li><span class="theme-toggle secondary" title="dark mode">&#9789;</span></li>
                    
                    <li><a href="#" id="search-toggle" class="secondary" title="Search (Ctrl + Shift + F)"> <span class="search-txt">Search</span><span class="search-magnifier"></span></a></li>
                    
                    <div class="underline"></div>
                </ul>
            </nav>
            
            <div class="marmite-background-overlay" id="overlay-close"></div>
            <div class="marmite-search-bar hidden">
                <span>Search</span>
                <button class="marmite-close-button" id="search-close">X</button>
                <input placeholder="Search" id="marmite-search-input" />
                <div class="marmite-search-bar-result">
                    <ul id="marmite-search-bar-result"></ul>
                </div>
            </div>
            
        </header>
        
        <section class="main-content">
            



<article>

  


<div class="content-title" id="title">
    <h1>Plotly-And-Streamlit</h1> 
    


<span class="content-date">
    <small> Mar 31, 2022 - &#10710; 5 min</small>
</span>

</div>

  
  <div class="content-toc">
    <a href="#" id="toc"></a>
    <details>
    <summary>🗒️</summary>
    <ul>
<ul>
<li><a href="#streamlit">Streamlit</a></li>
<li><a href="#plotly">Plotly</a></li>
<li><a href="#a-trivial-dashboard">A trivial dashboard</a></li>
</ul>
</ul>

    </details>
  </div>
  

  <div class="content-html"><!-- Content Injected to every content markdown header -->
<h2><a href="#streamlit" aria-hidden="true" class="anchor" id="streamlit"></a>Streamlit</h2>
<p>I use <code>streamlit</code> for any EDA I ever have to do at work.
It's super easy to spin up a small dashboard to filter and view dataframes in, live, without the fallbacks of Jupyter notebooks (kernels dying, memory bloat, a billion &quot;Untitled N.ipynb&quot; files, etc.)</p>
<p>At the highest level, streamlit lets you write a python script and call <code>streamlit run my_script.py</code> which will open up a web server with your streamlit stuff.
The dashboard refreshes whenever you change the script so you can add capabilities in real time, super fast!</p>
<p>I'll show an example of using <code>streamlit</code> and <code>plotly</code> to make a live dashboard to monitor system memory usage with <code>psutil</code>.
This is apart of my posts on <a href="psutil.html">psutil</a> and <a href="deques.html">deques</a>...</p>
<p><u>example at the bottom!</u></p>
<h2><a href="#plotly" aria-hidden="true" class="anchor" id="plotly"></a>Plotly</h2>
<p>I'm not going to make a big time intro to plotly here - there's a billion resources on the interwebs and the docs are really good.</p>
<p>Suffice it to say it's my goto plotting library for basically any and all needs.
I'm currently exploring it for live data streaming as I'm not sure it's the best solution but it's the one I'm familiar with.</p>
<p>For my <a href="https://github.com/nicpayne713/not-netdata"> not-netdata </a> project of visualizing live system resource data I  first need a way of appending data and popping data in and out of an array at every data refresh cycle to keep my plots looking nice with a fixed time window.</p>
<p>See <a href="deques.html">deques</a> for a short intro to the datatype I'm using.</p>
<p>First step is to initialize some objects to store data in.</p>
<pre><code class="language-python">data: Dict[str, MutableSequence[Optional[float]]] = defaultdict(deque)

arr_size = 10

data[&quot;time&quot;] = deque([None] * arr_size)
data[&quot;used_memory&quot;] = deque([None] * arr_size)
</code></pre>
<p><code>data</code> is a dictionary that I'll store deques in. The dictionary keys will be the type of data, in this case <code>time</code> and <code>used_memory</code>.</p>
<p>I fix an array size, <code>arr_size</code> to just 10 for now</p>
<p>Then I initialize the values for <code>time</code> and <code>used_memory</code> as <code>deque</code>s of length <code>arr_size</code>.
Simple enough!</p>
<p>Next is to fill those deques with some relevant data.
I'm not actually sure if this is the best way to do this but here's what I have done so far:</p>
<pre><code class="language-python">def refresh_data():
    global data
    memory = psutil.virtual_memory()

    data[&quot;time&quot;].append(time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()))
    data[&quot;used_memory&quot;].append(memory.used // (1024**3))

    data[&quot;time&quot;].popleft()
    data[&quot;used_memory&quot;].popleft()
</code></pre>
<p>If you ignore my usage of <code>global</code> you'll see that I can just <code>append</code> to each deque like it was a list.</p>
<p>But then to keep the relevant data in the deque, and to keep the length fixed, I simply <code>popleft</code> to remove the oldest datapoint!</p>
<h2><a href="#a-trivial-dashboard" aria-hidden="true" class="anchor" id="a-trivial-dashboard"></a>A trivial dashboard</h2>
<p>Now I'll prove just how easy it is to get a live data dashboard up and running with just a few lines of code thanks to streamlit!</p>
<pre><code class="language-python">
if __name__ == &quot;__main__&quot;:
    st.header(&quot;memory chart&quot;)
    stats = st.empty()
    while True:
        refresh_data()
        stats.plotly_chart(
            px.line(
                data,
                x=&quot;time&quot;,
                y=&quot;used_memory&quot;,
                title=f&quot;Memory usage stored in a deque!&quot;,
               )
            )
        time.sleep(0.5)
</code></pre>
<p><code>st</code> is the streamlit alias (imports shows at the bottom full example).
<code>st.header</code> puts a nice header on the page.
<code>st.empty</code> initializes an empty <code>streamlit container</code> in which we'll put a <code>plotly.express</code> figure.</p>
<p>At each iteration we'll <code>refresh_data()</code> which <code>appends</code> and <code>pops</code> data in the deques in the <code>data</code> dictionary.
Then we update the <code>stats</code> container with a plotly graph and the refresh happens seamlessly.</p>
<p>All in all the script looks like this:</p>
<pre><code class="language-python">
from collections import defaultdict, deque
import time
from typing import Dict, MutableSequence, Optional

from plotly import express as px
import psutil
import streamlit as st

data: Dict[str, MutableSequence[Optional[float]]] = defaultdict(deque)

arr_size = 10

data[&quot;time&quot;] = deque([None] * arr_size)
data[&quot;used_memory&quot;] = deque([None] * arr_size)


def refresh_data():
    global data
    memory = psutil.virtual_memory()

    data[&quot;time&quot;].append(time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()))
    data[&quot;used_memory&quot;].append(memory.used // (1024**3))

    data[&quot;time&quot;].popleft()
    data[&quot;used_memory&quot;].popleft()


def memory_chart():
    fig = px.line(
        data,
        x=&quot;time&quot;,
        y=&quot;used_memory&quot;,
        title=f&quot;Memory usage stored in a deque!&quot;,
    )
    return fig


if __name__ == &quot;__main__&quot;:
    st.header(&quot;memory chart&quot;)
    stats = st.empty()
    while True:
        refresh_data()
        stats.plotly_chart(memory_chart())
        time.sleep(0.5)
</code></pre>
<p>You can save this as <code>my_dash.py</code> and run with <code>streamlit run my_dash.py</code> and should see something like the following!</p>
<img src="https://cdn.statically.io/gh/pypeaday/images.pype.dev/main/blog-media/plotly-streamlit.gif" alt="plotly" title="Plotly in Streamlit" />
<!-- Content Injected to every content markdown footer -->
</div>
  
  <footer class="data-tags-footer">

    <div class="content-authors-flex">
      <div class="content-authors-full">
        
<div class="content-authors">
    <ul>
        
            
            
            <li>
                <a href="author-nicpayne.html">
                    <img src="https://github.com/pypeaday.png" alt="Nicholas Payne" class="avatar">
                    Nicholas Payne
                </a>
            </li>
            
        
    </ul>
</div>


      </div>

      <div class="date-tags-container">
        <div class="content-date">
          


<span class="content-date">
    <small> Mar 31, 2022 - &#10710; 5 min</small>
</span>

        </div>

        <ul class="content-tags">
          
          <li><a href="./tag-python.html">python</a></li>
          
          <li><a href="./tag-tech.html">tech</a></li>
          
        </ul>
      </div>
    </div>
  </footer>
  
</article>


<article>
  Back-links
  <ul>
    
    <li><a href="./deques.html">Deques</a></li>
    
  </ul>
</article>



  
  
  
  
  <article>
    Related python content
    <ul>
      
      
      <li><a href="./docker-context-and-an-issue-to-question-your-sanity.html">docker context (and an issue to question your sanity)</a></li>
      
      
      <li><a href="./add-a-healthcheck-to-your-fastapi-app.html">Add a healthcheck to your FastAPI app</a></li>
      
      
      <li><a href="./switching-from-altacv-to-rendercv-for-my-resume.html">Switching from AltaCV to RenderCV for my Resume</a></li>
      
      
      <li><a href="./switching-from-altacv-to-rendercv-for-my-resume.html">Switching from AltaCV to RenderCV for my Resume</a></li>
      
      
      <li><a href="./modal-labs.html">Modal Labs</a></li>
      
    </ul>
  </article>
  



    <article><h4><a href="#comments" aria-hidden="true" class="anchor" id="comments"></a>Comments</h4>
<script src="https://giscus.app/client.js"
        data-repo="pypeaday/pype.dev"
        data-repo-id="R_kgDOG8jshQ"
        data-category="Announcements"
        data-category-id="DIC_kwDOG8jshc4CmIcO"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="catppuccin_mocha"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</article>



        </section>
        
        <footer class="footer-content grid">
            <div>Powered by <a href="https://github.com/rochacbruno/marmite">Marmite</a> | <small><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY_NC-SA</a></small></div>
            
        </footer>
        
    </main>

    <script src="./static/marmite.js"></script>
    <script src="./static/custom.js"></script>
    
    <script type="module" src="./static/search.js"></script>
    
    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js"></script>
<script>
  hljs.highlightAll();
</script>



</body>
</html>
